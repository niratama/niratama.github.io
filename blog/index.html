<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="alternate" type="application/atom+xml" title="Atom" href="http://nira.poi.jp/blog/atom.xml">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://nira.poi.jp/blog/static/css/main.css" rel="stylesheet">
  <title>
    食用ではありません
  </title>
</head>
<body>
<div class="container">
  <header>
    <h1 class="page-header"><a href="http://nira.poi.jp/blog/">食用ではありません</a></h1>
  </header>
  <section>
<div class="row">
  <div class="col-md-9">
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2014-08-31-01.html">YAPC::Asia Tokyo 2014 1日目の感想</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2014-08-31-01.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2014-08-31 14:21</time>
      </div>
      

<p>とりあえず1日目の感想まとめてみました。</p>

<p>1日分でもけっこうなボリュームになったんで、次回はスキを見て書いてpostしたほうがいいのかもしれない。</p>

<p>2日目の感想はまた後日書きます。</p>

<h2>インフラエンジニア(狭義)は死んだ / @studio3104 さん</h2>

<p>「インフラエンジニア」という自称にとらわれすぎて、コードを書くことを避けるべきではない、というのは、
自分の立ち位置で考えてみれば「プログラマー」「アプリケーションエンジニア」が
インフラの勉強や企画運営に関わるのを避けるべきではない、って置き換えられるわけで、
まず「解決すべき問題は何なのか」というところをよく考えたほうがいいんだろうなと思いました。</p>

<p>このトーク大入り過ぎて無線LANが繋がらなくなったり、立ち見ですら収容しきれない感じでした。
他の多目的教室のトークでも大入りで立ち見、ってパターンちょくちょくある感じだったので、
もうちょいキャパの大きい部屋があるといいなという気もします。</p>

<p>あとすたじおさんを海外に飛ばす陰謀は残念ながら失敗に終わりました（ぉ</p>

<h2>Go For Perl Mongers / @lestrrat さん</h2>

<p>→<a href="http://go-talks.appspot.com/github.com/lestrrat/go-slides/2014-yapcasia-go-for-perl-mongers/main.slide#1">資料</a></p>

<p>Goの落とし穴とか考え方とかがよく分かるトークでした。
自分も最近使い始めたのでとてもありがたかったです。</p>

<h2>お待たせしました。Perl で BDD を簡単に実践する最高にクールなフレームワークができました / @tokuhirom さん</h2>

<p>一時期PerlでBDDやりたいと思っていくつかモジュール使ってみたけど、Test::Kantanはわかりやすくていい感じです。
あとPower Assert機能が素敵だと思いました。
Test::Builderに依存してないらしいので、今使ってるTest::Name::FromLineと併用できるのかが気になるところ。あとで試してみます。</p>

<h2>ランチ</h2>

<p>イベントホール行った時点でランチセッションのお弁当が終わっていたので、
外に出てたまたま見つけた<a href="http://r.gnavi.co.jp/5a0gvdh50000/">洋食とらひげ</a>で
<a href="https://twitter.com/Niratama/status/505199320321118208">日替わりランチのチキンたれカツ&amp;カレースパゲッティ</a>を。
美味しくてボリュームあってさすがに学生街の食堂とい感じでした。</p>

<p>いまぐぐってたら<a href="http://hamarepo.com/story.php?page_no=1&amp;story_id=2857">ステーキが美味しそう</a>なのがちょっと気になりました。</p>

<h2>DBIx::Class - what is it and what is it good for? / @ribasushi さん</h2>

<p>いままで英語のトークはさすがに100%ヒアリングできなくて、スライドと部分的に聞き取れる単語だけ、みたいな感じでしたが、
今回同時通訳があったので内容がちゃんと聴けて助かりました。</p>

<p>DBIx::Classはだいぶ昔に使ってたけど、未だに改良が続けられてるとの事で、いまもう一度使ってみるのもアリかもと思いました。</p>

<h2>ライブコーディング 2014 / @uzulla さん、 @songmu さん</h2>

<p>非常にライブ感あふれる感じでした。自分がもしあの立ち位置にいたら倒れるレベルで。</p>

<h2>WHERE狙いのキー、ORDER BY狙いのキー / @yoku0825 さん</h2>

<p>→ <a href="http://www.slideshare.net/yoku0825/whereorder-by">資料</a></p>

<p>Indexあったときの挙動がわかりやすく説明されてて、非常に勉強になりました。
普段「とりあえずIndexつけときゃいいんでしょ」的になりがちなので、実際のQueryでどう使われれるかも意識して
使ってみたいと思います。</p>

<p>あとスライドですが、プロジェクターだと背景は黒か暗色のほうが見やすいかなーと思いました。
今回のYAPC::Asia Tokyoの中では2日目の @kazeburo さんの資料が文字色とかも調整してあって見やすい感じでした。</p>

<h2>Mojoliciousを使ったwebアプリケーション開発 / @torii704 さん</h2>

<p>Mojoliciousはすでに仕事のコードで実戦投入してるので、どちらかというと
「自分変なことやってなかったっけ？」とか「もっといい手法があったんじゃ？」みたいな視点で聴いてました。
APIのまわり同じようなことやってたり、ディレクトリ配置とか自分がやってたより良さそうだったりで、次回に繋げられそうでした。</p>

<h2>Java For Perl Mongers / @Yappo さん</h2>

<p>→ <a href="http://yappo.github.io/talks/20140829-yapcasia2014-javaforperlmongers/#/title">資料</a></p>

<p>最初の出てきたコード、予想通りJavaだけどPerlでも動きますよパターンでしたがlvalueとかB:Deparseとか勉強になりました。
結局Javaの嫌な所がほとんどIDEで解決するのって、もうJava使うのにIDE使わないほうがおかしいってことなんだろうなと。
あとJava 8のStream APIはperlでも欲しいなぁと思いました。</p>

<h2>Lightning Talks Day 1</h2>

<h3>同人活動の報告と今後の展望 / @maka2_donzoko さん</h3>

<p>紙媒体はもう終わりということで全巻収納ボックス出すとの事。欲しいけど初期の数冊持ってないのが残念。</p>

<p>2日目には本完売したそうでおめでとうございます。</p>

<p>帰ってきた Top10 Kwalitative japanese authors 2014 / @charsbar さん</p>

<p>半分くらい新規ランクインだった感じでした。</p>

<h3>Relocatable perl / @shoichikaji さん</h3>

<p>ファイル置いてそのまま動かせるperlは確かに便利そう。</p>

<p>試してないけどcpanmでモジュールインストールしたあとそのままひとかたまりで配布して大丈夫なのかな？</p>

<h3>Perl入学式2014年度活動中間報告 / @__papix__ さん</h3>

<p>JPAとの連携やスタッフ増えたりと順調に発展している感じでした。</p>

<h3>Lens smart setter for immutable data / @hiratara さん</h3>

<p>→ <a href="https://github.com/hiratara/p5-Lens">リポジトリ</a></p>

<p>脳みそが追いつけませんでした(苦笑)</p>

<h3>beyond civic hacking / @gugod さん</h3>

<p>→ <a href="https://github.com/gugod/yapcasia-g0v-lt/blob/master/index.org">資料</a></p>

<p>英語はやっぱり追いつけませんでしたが、資料のスクショの漢字が助かりました(笑)</p>

<p>こういう可視化の試みは面白いなと思いました。</p>

<p>あと@hirataraさんが<a href="http://hiratara.github.io/posts/2014-08-29-YAPCAsia2014_g0v.html">g0v.twについて教えてもらった</a>という記事を書かれていたのでこちらも。</p>

<h3>OSSのりそうとげんじつ / @chobi_e さん</h3>

<p>→ <a href="https://gist.github.com/chobie/915ec6d5a1e945be716d">資料と補足</a></p>

<p>OSS活動はコミットとかできてないので、英語の件についてが参考になりました。</p>

<h3>新卒インフラエンジニアがピクシブ新社内広告サーバ構築に挑んだ話 / @catatsuy さん</h3>

<p>→ <a href="http://catatsuy.hateblo.jp/entry/2014/08/30/011301">資料</a></p>

<p>pixivは全部小文字。覚えました。</p>

<h3>Web Framework BenckmarksとPerlの現状報告会 / @kazeburo さん</h3>

<p>→ <a href="http://www.slideshare.net/kazeburo/yapcasia-2014lttfb">資料</a></p>

<p>正当に評価してもらうにはこういうこまめな活動も必要なんだなと思いました。</p>

<h3>YAPC::Asia Ramen Challenge / @bayashi さん</h3>

<p>→ <a href="http://bayashi.net/diary/2014/0829">資料</a></p>

<p>ラーメンが好き過ぎる。</p>

<h2>HUB</h2>

<p>今回懇親会が事前申し込みだったのに気がついたのは申し込み埋まったあとだったので、素直にHUBにいって呑んでました。</p>

<p>1000杯とかわりとすぐなくなるかと思ってたけど、結局自分の帰った23時くらいまで大丈夫だったのが意外でした。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2014-08-28-02.html">YAPC::Asia Tokyo 2014 0日目メモ</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2014-08-28-02.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2014-08-29 00:42</time>
      </div>
      

<p>というわけで前夜祭から参加してきました。</p>

<p><a href="http://twilog.org/Niratama/hashtags-yapcasia">Twilog</a>も参照のこと。</p>

<h2>受付</h2>

<p>17:30から受付という事だったので時間合わせて行ったらまだ準備中でした。</p>

<p>結局だいたい17:45くらいに受付開始。
この時間から来てる人は訓練された個人スポンサーが多かったようで、一般列がらがらなのに個人スポンサー列が行列という不思議な状態に。</p>

<h2>開場</h2>

<p>ビールやソフトドリンクの他に、今回は<a href="http://labo.dmm.com/information/2014/0729/">DMMかき氷</a>が配られてました。
数日前までならちょうどよかったのかもしれないけど、残念ながら今日はだいぶ涼しかったせいで微妙な感じに。
でも、なかなか美味しかったので、いい時期に売ってたら普通に買うレベルじゃないかと。</p>

<h2>欲しいものは作ればいい! 〜Webアプリ10連発〜</h2>

<p>まず @yusukebe さんから。ライブラリや環境が揃ってきた今だから、ということでこの企画だそうで。</p>

<h3>GeekDojo / @__papix__ さん</h3>

<ul>
<li>短期間でのリリースにはやっぱりテストと属人性の排除が重要</li>
<li>Botやツールを組み合わせて通知や自動化ってのもよさそう</li>
</ul>


<h3>hrhm.info / @hondallica さん</h3>

<ul>
<li>ネットにあるデータを複数収集して組み合わせることで自サービス向けのデータを作っている</li>
<li>収集には専用にPCを用意していて、最初はとにかく集めるのが重要</li>
</ul>


<h3>pplog / @ppworks さん</h3>

<ul>
<li>herokuですぐリリースできるベースアプリを作ってテンプレートのかわりに使っている

<ul>
<li>飽きる前に・小さく・最初は挑戦しない・小さく挑戦する、を実現するのに良さそう</li>
</ul>
</li>
<li>開発者が中の人ぶらない、ってのは情報集約の点でも大事なのかもしれない</li>
</ul>


<h3>ゴミ収集カレンダー / @syachi さん</h3>

<ul>
<li>音声読上げ用のHTMLから正規表現でデータをスクレイピングしているとの事。パターンが多くて大変そう</li>
<li>Google CalendarからアクセスするiCalは<code>text/calendar; charset=utf-8</code>でないと文字化けを起こすそうだ</li>
</ul>


<h3>wri.pe / @masuidrive さん</h3>

<ul>
<li>自分の欲しいものを自分で作った結果としてのサービス</li>
<li>データを別サービスにバックアップできるようにするというのはサービス継続の話だけじゃなくて、ユーザー自身乗り換えのときとか、トラブルのときにも有効な気がする</li>
<li>ちなみに今回の記事の元になったメモも、この発表聞いてるとき以後はwri.peを使って書いてます</li>
</ul>


<h3>プライベートで3年間チーム開発した話 / @hika69 さん</h3>

<ul>
<li>単一のサービスじゃなくてチーム開発でいくつかサービスを立ちあげた話</li>
<li>とにかくサービスを完成させるのが大事</li>
</ul>


<h3>ttyrecからGIFアニメを作る話 / @sugyan さん</h3>

<ul>
<li>ttyrecの出力ファイルをGIFアニメ化するツールを作ってWebサービス化した話</li>
</ul>


<h3>GIFMAGAZINEの話 / @razokulover さん</h3>

<ul>
<li>GIFアニメを見られるサイトはたくさんあるけど、GIFアニメを作るところからやりたかったとの事</li>
<li>一番使って欲しいユーザー向けの機能の取捨選択がWebサービスの強みに繋がるようだ</li>
</ul>


<h3>togetter / @yositosi さん</h3>

<ul>
<li>もともとはイベントのレポートを用意するかわりにツイートをまとめられるようにしたのが発端だそうだ</li>
</ul>


<h3>クイズを支える技術 / @debility さん</h3>

<ul>
<li>スタッフ入りから30min or die</li>
<li>余興に使えるのは30min or die</li>
<li>手書き部分を署名の電子化に使えるんじゃないかとかいう話が出ている</li>
</ul>


<h2>雑感</h2>

<p>後半アルコールのせいかメモがまとめきれてない感じになってて薄くなってますが（笑）</p>

<p>とにかく小さくてもとりあえず作って始めてしまうのが大事なんだなという感じ。</p>

<p>ネタもロクに思いつかないのになにか作りたい気分になってくる発表でした。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2014-08-28-01.html">長いことさぼってました</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2014-08-28-01.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2014-08-28 16:19</time>
      </div>
      

<p>そろそろYAPC::Asia 2014開催ということで思い出してみたら9ヶ月弱くらいほったらかしだったようで。</p>

<p>今回は1日ごとにblog書いていきたいなぁと。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2013-12-04-01.html">NudgePadで遊んでみた -1-</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2013-12-04-01.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2013-12-05 00:53</time>
      </div>
      

<p>JavaScriptをブラウザ上で試すサイト、ってのはよくある(最近お気に入りの<a href="http://plnkr.co/">Plunker</a>もそのひとつ)んですが、<a href="http://nudgepad.com/">NudgePad</a>というnode.jsのWebサーバをブラウザ上で試せるサイトがある、ということで、面白そうだったので遊んでみました。</p>

<ul>
<li><a href="http://www.moongift.jp/2013/11/nudgepad-%E8%A9%A6%E3%81%9D%E3%81%86%EF%BC%81web%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AEide%E5%AE%9F%E8%A1%8C%E7%92%B0%E5%A2%83/">NudgePad - 試そう!WebベースのIDE&amp;実行環境</a></li>
</ul>


<h2>サインアップ</h2>

<p><a href="http://nudgepad.com/">http://nudgepad.com/</a> にアクセスすると、 <a href="http://landing.nudgepad.com/">http://landing.nudgepad.com/</a> にリダイレクトされてサインアップ画面になります。</p>

<p>プロジェクトURLは、重複するものがなければ再確認なしで作成されるので、Start Project ボタンを押すときは用心したほうが良さそうです。</p>

<h2>とりあえずセキュリティ対策</h2>

<p>プロジェクトが無事作成されるとファイル一覧画面になります。</p>

<p>この時点で用意されているのは index.html と nudgepad/ ディレクトリですが、ここにあるファイル<strong>すべてが</strong>プロジェクトURLから公開されている状態です。</p>

<p>nudgepad/ ディレクトリにはログインに必要な情報も入っているので、ファイル名さえわかっていれば<strong>丸見え</strong>になります。</p>

<p>とりあえず用心のため、 nアイコン → Labs → Private でプライベートファイルの設定をしてしまいます。(なんでこんな重要な機能が Labs なのかは謎)</p>

<p>テキストエリアに <code>/nudgepad/</code> を入力して Save して、 Restart でサーバを再起動すると、とりあえずnudgepadディレクトリ以下はログインしているユーザー以外にはみえなくなって一安心です。</p>

<h2>まずサーバ側を試してみる</h2>

<p>nアイコン → Server でサーバ側のログとシステム情報が確認できます。ここにコンソールもあって、直接コマンドを実行することもできます。</p>

<p>ここで Menu → Edit App.js すると、以下の内容の app.js というファイルがWebサーバのひな形として作られます。</p>

<pre><code>module.exports = function (app) {
  app.get('/hello', function (req, res, next) {
    res.send('Hello world')
  })
}
</code></pre>

<p>Restart でサーバを再起動すると、 app.js が起動時に読み込まれます。</p>

<p>ひな形には /hello へのリクエストに文字列を返す処理が入っているので、試しに http://プロジェクトURL/hello にアクセスすると、 app.jsに書いてある処理の通りに “Hello world” が表示されるはずです。</p>

<p>ちなみに、フレームワークは<a href="http://expressjs.com/">express</a>の3.1.1が使われているようです。</p>

<p>あと、 app.js はさすがに特別扱いされているようで、 http://プロジェクトURL/app.js にアクセスしても、 "app.js is private" と表示されるだけで中身は見えませんでした。</p>

<h2>GitHubとの連携</h2>

<p>nアイコン → Labs の一覧に Git とかあったので試してみました。</p>

<p>Commands メニューにgit関係のコマンドが用意されています。</p>

<p>まず、 Install で<code>git init</code>が(あとたぶん<code>git add .</code>も)実行されて、リポジトリが初期化されます。</p>

<p>実行結果にも書いてありますが、ユーザー名とメールアドレスを設定しろ、と言われるのですが、 Git 画面からは設定できないらしく、コンソールから</p>

<pre><code>git config --global user.email "you@example.com"
git config --global user.name "Your Name"
</code></pre>

<p>をそれぞれ実行することで設定する必要があります。</p>

<p>設定が終わったら Commit でコミットしておきます。</p>

<p>次にGitHubにリポジトリを用意して、 Create Deploy Key で SSH Key を作るんですが、ポップアップに小さく Key が表示されます。うっかり閉じてしまった場合は /nudgepad/deploy.key.pub に Key が格納されてます。</p>

<p>お察しの通り、 Private で隠しておかないと、Private Keyともども<strong>丸見え</strong>です。</p>

<p>GitHubのリポジトリの Deploy Key にこの Key を設定すれば、NudgePadからGitHubにアクセスできるようになります。Connect to GitHub でGitHubへの接続テストができますが、 ~/.ssh にディレクトリがないとエラーになるので、コンソールから</p>

<pre><code>mkdir ~/.ssh
chmod 700 ~/.ssh
</code></pre>

<p>で用意するのが吉です。</p>

<p>あとは、 Add Origin でGitHubのリポジトリURL(SSHのほう)を設定して Push to Origin すれば、GitHubのリポジトリにファイルが格納されます。</p>

<p>さっき書いたとおり、コンソールから普通にgitコマンド使えるので、いざとなればいつもどおりの運用もできるかと。</p>

<h2>ログイン機構</h2>

<p>ここまできてもまだ「ログイン」らしい作業をなにもしてないですが、ユーザー認証情報はCookieに入っているだけなので、ほっとくとログインできなくなってしまいます。</p>

<p>nアイコン → Team にユーザー認証まわりの設定がありますが、作りかけ感たっぷりなシロモノで、メニュー名が"undefined"になってたり、メニューの Login Link を選んでも肝心の部分が"undefined"になったダメっぽいURLが表示されるだけだったりします。</p>

<p>普通にプロジェクトを作ったままの場合、ユーザーのメールアドレスは owner@プロジェクト名.nudgepad.com になっています。チームメンバーなら後述するログイン画面でメールアドレスを入力すれば、メールでログイン用のURLが送られてきますが、このままでは当然メールが届きません。</p>

<p>というわけで、 Change Email で自分のメールアドレスを入力するのがここでの正解のようです。</p>

<p>で、 Logout を選んだり、Cookieが消えたりしてログインし直す時はどうするのか、というと、 http://プロジェクトURL/nudgepad にアクセスするとログイン画面が表示されるので、登録しておいたメールアドレス入力して Get Login Link をクリックすると、ログイン用のURLがメールで送られてきます。</p>

<p>お察しの通り、ログイン機構はとても簡易なもので、このURLがバレてしまうとログインできてしまうというレベルのものです。もともと本格的なものに使うサイトではありませんが要注意ポイントです。</p>

<h2>今日はここまで</h2>

<p>まだほんのさわりだけですが、NudgePadを使いはじめるにあたって必要そうなあたりをまとめてみました。</p>

<p>使ってくうえでいろいろ問題もあったりするんですが、個人的にはそれ込みで楽しめているので、しばらく付き合っていこうかと思っています。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2013-10-20-02.html">続・FreeBSDのportsを一般ユーザー権限でインストールしてみるテスト</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2013-10-20-02.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2013-10-20 02:43</time>
      </div>
      

<p>とりあえずblog更新して、ああそういえばgitも入ってないんだよな欲しいよな、と早速流用して<code>make</code>してみたところ、</p>

<pre><code>$ make
===&gt; Cannot create , check permissions
*** Error code 1
</code></pre>

<p>おいおい。という訳で再調査。</p>

<p><code>/usr/ports/Mk</code>をこのメッセージで検索したところ、portsのオプション設定のあたりがどうやら原因のようでした。</p>

<p><code>NO_PKG_REGISTER</code>を設定したので<code>/var/db/ports</code>はそのままで無視していたのですが、どうやらオプション設定するあたりで参照しているようなので、これをダミーで設定するようにしてみました。</p>

<pre><code>PORT_DBDIR=${HOME}/var/db/ports
</code></pre>

<p>これを<code>~/ports/ports/ports.userspace.mk</code>に追加することで無事makeが通るようになりました。</p>

<p>パーミッションでエラーで出てたくせに、ディレクトリが存在しなくても問題ないのは謎、というかそこまで追っかけてません。</p>

<p>次に<code>make install</code>すると<code>git_daemon</code>を<code>~/ports/etc/rc.d/</code>に置こうとして失敗するので、あらかじめ、</p>

<pre><code>$ mkdir -p ~/ports/etc/rc.d
</code></pre>

<p>でディレクトリを用意しておきます。(当然<code>git_daemon</code>は使いませんが)</p>

<p>これで無事にgitもインストールできました。</p>

<p>おそらくportsのシステムで参照しているディレクトリをひと通りチェックして対策していれば、こんなにすぐに引っかからなかったんでしょうけど、最低限必要なものが入ればいいだけなので今後も全チェックまではやらないかと。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2013-10-20-01.html">FreeBSDのportsを一般ユーザー権限でインストールしてみるテスト</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2013-10-20-01.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2013-10-20 00:47</time>
      </div>
      

<p><strong>※ この記事の作業だけでは動かないportsもあります。詳しくは次の記事を参照してください。</strong></p>

<p>(論理)今日は朝っぱらから<a href="http://www.yokohama-akarenga.jp/oktoberfest2013/">横浜にビールでも飲み</a>に行くか、と思ってたのに、なぜか昔使ってたFreeBSDな環境を気まぐれで再整備してました。</p>

<p>ただviが素のviだったで、とりあえずなんとかしたいなと思ったんだけど、自分の管理してるサーバじゃないのでユーザー権限だけでなんとかできる方法を探してみました。</p>

<ul>
<li><a href="http://quantum-public-diary.blogspot.jp/2012/12/portsfreebsd.html">quantum の記録: portsにあるものを一般ユーザとしてインストールする方法(FreeBSD)</a></li>
</ul>


<p>記事中ちょっと気になったのが、</p>

<blockquote><p>でもinstallは途中でsuをしようとして失敗するので、手で配置する。</p></blockquote>

<p>というところで、あのへんいろいろ細工できるようになってた気がしたので、<code>/usr/ports/Mk/bsd.port.mk</code>を読んでみたら、</p>

<pre><code># INSTALL_AS_USER
#                               - Define this to install as the current user, intended
#                                 for systems where you have no root access.
</code></pre>

<p>なんてのを発見。
あとはシステムのディレクトリ見に行きそうなあたりを回避する目的で<code>NO_PKG_REGISTER</code>とか<code>NO_MTREE</code>あたりを追加してみました。</p>

<p>最終的には以下のような感じ。基本的な流れは元サイトそのままです。</p>

<h3>1. インストール場所の用意、portsの知恵を借りる</h3>

<p>元サイトと配置が違うけど、この辺りはお好みでどうぞ。</p>

<p>vimだけじゃなくて他もインストールする可能性ある気がしたのでこんな感じに。</p>

<pre><code>$ mkdir ~/ports
$ mkdir ~/ports/ports
$ mkdir ~/ports/distfiles
$ cp -r /usr/ports/editors/vim ~/ports/ports/
</code></pre>

<h3>2. Makefileを編集する</h3>

<p>設定を上書きする部分は、あとで他のportsを入れるときにも使いまわせるように、別ファイルにして<code>.include</code>で読み込むようにしてみました。</p>

<pre><code>INSTALL_AS_USER=yes
NO_PKG_REGISTER=yes
NO_MTREE=yes
DISTDIR=${HOME}/ports/ports/distfiles
PREFIX=${HOME}/ports
WRKDIR=/tmp/work
TARGETDIR=${HOME}/ports
</code></pre>

<p>上記の内容で<code>~/ports/ports/ports.userspace.mk</code>というファイルを作成しておいて、<code>~/ports/ports/vim/Makefile</code>の先頭に、</p>

<pre><code>.include "../ports.userspace.mk"
</code></pre>

<p>を追加します。</p>

<h3>3. makeして、installする</h3>

<p>普通にインストールできるようになりました。</p>

<pre><code>$ cd ~/ports/ports/vim/
$ make
$ make install
</code></pre>

<h3>4. 補足</h3>

<p>とりあえずvimに関してはこれで特に問題なかったんですが、その他のportsがこれだけで十分かは不明なので、実際に自分の環境で試してみる場合にはご注意ください。</p>

<p>しかし、vim 7.3のパッチが556個(本家ftp.vim.orgに置いてあるファイルは1,314個)もあって、fetchしてくるときにftpサイトが音を上げてエラーをだしているという……fetchしているときにProtocol errorとか出てても気にしないでください。</p>

<p>これports側でhttpを優先にするかvim.org側である程度の数ごとにtarballにしたほうがいい気が……</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2013-09-22-03.html">YAPC::Asia Tokyo 2013に参加してきました</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2013-09-22-03.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2013-09-22 19:56</time>
      </div>
      

<p>という訳で、<a href="http://yapcasia.org/2013/09/yapcasia-2013.html">「ブログを書くまでがYAPC」</a>だそうなので感想エントリを書いてみます。</p>

<h2>会場</h2>

<p>駅からも近くて、会場内の移動が基本フラットだったのが便利でした。</p>

<p>ただ、受付〜メインホール出入口はボトルネックになっていた感じ。
屋台村は通路に設置しないほうが、屋台がみたい人にとっても通路を通るだけの人にとっても良かった気はします。</p>

<p>提灯とか飾ってあってお祭りっぽい雰囲気はなかなか良かったので、次回もうちょっとスペースとってやってもいいかと。</p>

<h2>会場ネットワーク</h2>

<p>一部のアクセスポイントで、繋がっているようにみえてデータが流れない、という状況が発生することがありましたが、 それ以外は快適で非常に助かりました。</p>

<h2>ランチセッション</h2>

<p>お弁当美味しかったですｗ</p>

<h2>トーク</h2>

<p>自分の興味半分、仕事に使えそうなネタ半分で選んだ感じですが、裏で行けなかったトークにも面白そうなのが沢山あって、今回は特にぎりぎりまでどれにするか迷いました。</p>

<p>多目的教室を使う一部のトークが大入りになっていて、イベントホール使っていれば良かったんじゃないか、という気もしました。
このへんは飲食可なのがイベントホールのみ、という事情もあったのかもしれませんが。</p>

<p>あとはトークとトークの間に休憩時間がもう少し欲しかったですね。
わりとトイレもギリギリという感じだったので。</p>

<h2>懇親会</h2>

<p>今回は直後に大人の事情があって1時間弱だけ参加でしたが、食事も話も楽しめました。</p>

<h2>LT</h2>

<p>2日目のLTで時間切り詰めになっても、すごい勢いで発表している様は、まさにLightning。</p>

<h2>(個人的な)トラブル</h2>

<p>1日目いきなり寝坊＋東横線のトラブルでオープニングには間に合わなかったのが痛かった……</p>

<h2>次回以降の話</h2>

<p>今回で牧さんとくしいさんが引退ということで、次回以降どうなるのか予想つかない状態ですが、また1,000人以上集まるような大規模なイベントになることを期待したいです。</p>

<p>自分もLTソンあたり挑戦してみたいですね。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2013-09-22-02.html">Riji入れてみた</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2013-09-22-02.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2013-09-22 17:51</time>
      </div>
      

<p>ちょうど<a href="http://www.songmu.jp/riji/entry/2013-09-21-yapcasia2013-1.html">YAPC::Asia Tokyo 2013のLTでSongmuさんが紹介</a>していた<a href="https://github.com/Songmu/p5-Riji">Riji</a>を使ってみました。</p>

<p>以下メモと雑感。</p>

<ul>
<li>依存モジュールのインストールに時間かかるなーと思ったら、50個くらいモジュールが追加された。(plenvで入れた、ほぼすっぴん状態のPerlだったから、というのはあるかもしれない)</li>
<li>チュートリアルで言及されていて、TOML(<a href="https://github.com/mojombo/toml">https://github.com/mojombo/toml</a>)ってのがあるのを知った。ぱっと見はデータ構造つきで階層化できるiniファイルっぽい印象。</li>
<li>いままでwget入れてなかったのに気がついた。普段curl使ってて困ってなかったし。でもソースざっと眺めてみた感じだとwget使ってないような？</li>
<li>GitHub Pages+独自ドメインで使ってみた。<a href="http://songmu.github.io/p5-Riji/blog/entry/003_publish.html">チュートリアル003</a>と<a href="https://help.github.com/categories/20/articles">GitHub PagesのHelp</a>を参考に。

<ul>
<li>User Pagesの場合、gh-pagesブランチじゃなくてmasterブランチのファイルを参照するので、riji.ymlへの設定の追加とgh-pagesブランチへの切り替えは不要</li>
<li>User Pages用のリポジトリ名の規則は決まっている(username.github.ioというリポジトリを作る)</li>
<li>CNAMEというファイルをリポジトリのルートに置いて、使うドメイン名を書く</li>
<li>使うドメインをCNAME使ってusername.github.ioに向ける。CNAME使えない場合は指定のIPアドレスに。</li>
</ul>
</li>
<li><a href="http://songmu.github.io/p5-Riji/blog/entry/002_edit.html">チュートリアル002</a>のとおりにサンプル削除してそのままcommitしてしまうと、entryディレクトリが消えてしまうので、.gitignoreとか.gitkeepとか置いておくと吉かもしれない。あとriji new-entryはentryディレクトリ消えてるとエラーでコケる。</li>
<li>riji server -R articleでファイル更新に追従してくれる。(メモってなかったけど発表のデモでやってた気がする)</li>
<li>デフォルトのテンプレートで使ってるBootstrapは3.0.0-rc1だったけど、既に3.0.0出てたのでテンプレート修正時についでに変更。</li>
<li>とりあえずTwitterのWidgetくらいはくっつけてみた。</li>
<li>コメントはどうしよう？</li>
</ul>


<p>実際エントリ書きよりもテンプレート修正とGitHub Pages関係(User Pagesなのにgh-pages作ったりしてハマった)のほうに時間がかかった気がします。</p>

<p>せっかく作ったので、こまめに更新できたらなぁ、と。</p>

    </article>
    <hr />
    <article>
      <h1><a href="http://nira.poi.jp/blog/entry/2013-09-22-01.html">ぶろぐはじめました(n年ぶりm度目)</a> <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://nira.poi.jp/blog/entry/2013-09-22-01.html" data-via="Niratama" data-lang="en">Tweet</a></h1>
      <div class="pubdate">
        <time pubdate>2013-09-22 17:51</time>
      </div>
      

<p>とりあえずYAPC::Asia Tokyo 2013を終わらせるのにBlogつくってみました。</p>

<p>以前のYAPC::AsiaでBlog書いてないので終わってないんじゃないか、という件については気にしないでください。</p>

<p>Blogつくるにあたってのイロイロは以降のエントリで……</p>

    </article>
  </div>
  <div class="col-md-3">
    <nav>
      <ul class="list-group">
        <li class="list-group-item"><a href="http://nira.poi.jp/blog/archives.html">Archives</a></li>
      </ul>
    </nav>
      <aside class="tags">
        <h1>Tags</h1>
        <ul class="tags list-group">
          <li class="list-group-item"><a href="http://nira.poi.jp/blog/tag/yapc.html">yapc <span class="badge pull-right">5</span></a></li>
          <li class="list-group-item"><a href="http://nira.poi.jp/blog/tag/perl.html">perl <span class="badge pull-right">4</span></a></li>
          <li class="list-group-item"><a href="http://nira.poi.jp/blog/tag/freebsd.html">freebsd <span class="badge pull-right">2</span></a></li>
          <li class="list-group-item"><a href="http://nira.poi.jp/blog/tag/nodejs.html">nodejs <span class="badge pull-right">1</span></a></li>
          <li class="list-group-item"><a href="http://nira.poi.jp/blog/tag/nudgepad.html">nudgepad <span class="badge pull-right">1</span></a></li>
        </ul>
      </aside>
  </div>
</div>
  </section>
  <footer>
    <hr>
    <p>こばやし &#39;にらたま&#39; けんいち <a href="https://twitter.com/Niratama" class="twitter-follow-button" data-show-count="false">Follow @Niratama</a></p>
  </footer>
</div>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
  <script>$(function(){$('pre > code').addClass('prettyprint');});</script>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</body>
</html>
